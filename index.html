<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Landing — 4 videos scroll</title>
  <style>
    :root{--bg:#111;color:#fff}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial}
    .section{height:100vh;display:grid;place-items:center;overflow:hidden}
    .video-wrap{position:relative;width:100%;height:100%;}
    video{width:100%;height:100%;object-fit:cover;display:block}
    .badge{position:fixed;left:12px;bottom:12px;padding:8px 12px;background:rgba(0,0,0,.5);backdrop-filter:blur(4px);border-radius:10px;color:#fff;font-size:14px}
    .unmute-btn{position:fixed;right:12px;bottom:12px;padding:10px 14px;border-radius:999px;background:rgba(255,255,255,0.12);border:1px solid rgba(255,255,255,0.08);color:#fff;cursor:pointer}
  </style>
</head>
<body>
  <!-- Four full-screen sections each containing the same video -->
  <section class="section"><div class="video-wrap"><video data-index="1" playsinline loop autoplay muted preload="auto" src="https://i.imgur.com/PxZhK0d.mp4"></video></div></section>
  <section class="section"><div class="video-wrap"><video data-index="2" playsinline loop autoplay muted preload="auto" src="https://i.imgur.com/PxZhK0d.mp4"></video></div></section>
  <section class="section"><div class="video-wrap"><video data-index="3" playsinline loop autoplay muted preload="auto" src="https://i.imgur.com/PxZhK0d.mp4"></video></div></section>
  <section class="section"><div class="video-wrap"><video data-index="4" playsinline loop autoplay muted preload="auto" src="https://i.imgur.com/PxZhK0d.mp4"></video></div></section>

  <div class="badge">Scroll to switch videos — only the visible one plays</div>
  <button class="unmute-btn" id="unmuteBtn" aria-pressed="false">Unmute</button>

  <script>
    // Behavior:
    // - Only the intersecting (mostly visible) video plays; others pause.
    // - Videos autoplay muted (required by browsers). We listen for the first user interaction
    //   (wheel, touchstart, keydown, or click) to unmute the currently visible video.
    // - A persistent Unmute button allows the user to unmute if autoplay policies block programmatic unmute.

    const videos = Array.from(document.querySelectorAll('video'));
    const unmuteBtn = document.getElementById('unmuteBtn');
    let userInteracted = false;

    // IntersectionObserver to play the video which is mostly visible
    const obs = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        const v = entry.target;
        if(entry.intersectionRatio > 0.6){
          // Make sure it plays
          v.play().catch(()=>{});
        } else {
          v.pause();
        }
      });
    },{threshold:[0.0,0.25,0.5,0.75,1.0]});

    videos.forEach(v=>{
      // Ensure muted autoplay as required for most browsers
      v.muted = true;
      v.volume = 1.0;
      v.addEventListener('canplay', ()=>{
        // try to play when can
        v.play().catch(()=>{});
      });
      obs.observe(v);
    });

    // Try to unmute on first explicit user interaction (scroll/click/tap/keydown)
    function firstInteractionHandler(e){
      if(userInteracted) return;
      userInteracted = true;
      // unmute the currently visible video (the one that is not paused)
      const visible = videos.find(v => !v.paused) || videos[0];
      try {
        visible.muted = false;
        visible.play().catch(()=>{});
        unmuteBtn.setAttribute('aria-pressed','true');
        unmuteBtn.textContent = 'Muted? Click to toggle';
      } catch(err){
        // Some browsers still prevent programmatic unmute; leave button for manual toggle
        console.warn('Could not unmute programmatically', err);
      }

      // remove listeners after first interaction
      ['wheel','touchstart','keydown','click'].forEach(ev=>window.removeEventListener(ev, firstInteractionHandler));
    }

    ['wheel','touchstart','keydown','click'].forEach(ev=>window.addEventListener(ev, firstInteractionHandler, {passive:true}));

    // Unmute button toggles mute on the currently visible video
    unmuteBtn.addEventListener('click', ()=>{
      const visible = videos.find(v => !v.paused) || videos[0];
      visible.muted = !visible.muted;
      unmuteBtn.setAttribute('aria-pressed', String(!visible.muted));
      unmuteBtn.textContent = visible.muted ? 'Unmute' : 'Mute';
      try { visible.play(); } catch(e){}
    });

    // Auto-scroll from the first section to the second after 3 seconds
    window.addEventListener('load', ()=>{
      setTimeout(()=>{
        const second = document.querySelectorAll('.section')[1];
        if(second) second.scrollIntoView({behavior:'smooth'});

        // Try to unmute the first visible video right after auto-scroll
        const visible = [...document.querySelectorAll('video')].find(v => !v.paused) || document.querySelector('video');
        if(visible){
          try {
            visible.muted = false;
            visible.play().catch(()=>{});
          } catch(e){}
        }

      }, 2000);
    });

    // Optional: smooth scroll between sections when user uses wheel / touch
    // (This is native on most platforms; we keep default behavior.)

    // Accessibility: if JS is disabled, videos will appear but autoplay behavior may vary.

    // Note: Browsers intentionally block automatic unmuting without an explicit user gesture.
    // This page tries to unmute on the first user gesture (scroll/click/tap/keydown). If a browser
    // still blocks it, use the Unmute button.
  </script>
</body>
</html>
